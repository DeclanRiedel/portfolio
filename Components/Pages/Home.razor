@page "/"
@inject IJSRuntime JS

<PageTitle>Home</PageTitle>

<div class="content-wrapper">
    <div class="hero-section">
        <img src="images/background.png" class="background-image" alt="Background" id="background-image" />

        <div class="nav-links">
            <MudStack Spacing="8">
                <MudButton Class="custom-nav-button" OnClick="@(() => ScrollToSection("skills"))">
                    Skills <MudIcon Icon="@Icons.Material.Filled.ArrowDownward" />
                </MudButton>
                <MudButton Class="custom-nav-button" OnClick="@(() => ScrollToSection("projects"))">
                    Projects <MudIcon Icon="@Icons.Material.Filled.ArrowDownward" />
                </MudButton>
                <MudButton Class="custom-nav-button" OnClick="@(() => ScrollToSection("about"))">
                    About Me <MudIcon Icon="@Icons.Material.Filled.ArrowDownward" />
                </MudButton>
            </MudStack>
        </div>
    </div>

    <div class="sections-container">
        <div id="skills" class="skills-section">
            <MudText Typo="Typo.h2" Align="Align.Center" Class="mb-8">Skills</MudText>
            <MudGrid Justify="Justify.Center" Spacing="6">
                <MudItem xs="12" sm="6" md="4">
                    <div class="skill-card csharp">
                        <img src="images/csharp-logo.png" alt="C# Logo" class="skill-logo" />
                        <MudText Typo="Typo.h5" Class="mt-2">C#</MudText>
                        <MudText>Experienced</MudText>
                    </div>
                </MudItem>
                <MudItem xs="12" sm="6" md="4">
                    <div class="skill-card js">
                        <img src="images/javascript-logo.png" alt="JavaScript Logo" class="skill-logo" />
                        <MudText Typo="Typo.h5" Class="mt-2">JavaScript</MudText>
                        <MudText>Some Experience</MudText>
                    </div>
                </MudItem>
                <MudItem xs="12" sm="6" md="4">
                    <div class="skill-card dotnet">
                        <img src="images/dotnet-logo.png" alt=".NET Logo" class="skill-logo" />
                        <MudText Typo="Typo.h5" Class="mt-2">.NET</MudText>
                        <MudText>Experienced</MudText>
                    </div>
                </MudItem>
                <MudItem xs="12" sm="6" md="4">
                    <div class="skill-card postgresql">
                        <img src="images/postgresql-logo.png" alt="PostgreSQL Logo" class="skill-logo" />
                        <MudText Typo="Typo.h5" Class="mt-2">PostgreSQL</MudText>
                        <MudText>Experienced</MudText>
                    </div>
                </MudItem>
                <MudItem xs="12" sm="6" md="4">
                    <div class="skill-card linux">
                        <img src="images/linux-logo.png" alt="Linux Logo" class="skill-logo" />
                        <MudText Typo="Typo.h5" Class="mt-2">Linux</MudText>
                        <MudText>Experienced</MudText>
                    </div>
                </MudItem>
                <MudItem xs="12" sm="6" md="4">
                    <div class="skill-card nix">
                        <img src="images/nix-logo.png" alt="Nix Logo" class="skill-logo" />
                        <MudText Typo="Typo.h5" Class="mt-2">Nix</MudText>
                        <MudText>Experienced</MudText>
                    </div>
                </MudItem>
            </MudGrid>
        </div>

        <div id="projects" class="projects-section">
            <MudText Typo="Typo.h2" Align="Align.Center" Class="mb-8">Projects</MudText>
            <MudGrid>
                @foreach (var project in visibleProjects)
                {
                    <MudItem xs="12" sm="6" md="4">
                        <MudCard Elevation="4" Class="project-card">
                            <MudCardHeader>
                                <MudText Typo="Typo.h5">@project.Title</MudText>
                            </MudCardHeader>
                            <MudCardContent>
                                <MudText>@project.Description</MudText>
                            </MudCardContent>
                            <MudCardActions>
                                <MudButton Variant="Variant.Text" Color="Color.Primary">Learn More</MudButton>
                            </MudCardActions>
                        </MudCard>
                    </MudItem>
                }
            </MudGrid>
            
            @if (projects.Count > 6)
            {
                <div class="d-flex justify-center mt-4">
                    @if (visibleProjects.Count < projects.Count)
                    {
                        <MudButton Class="custom-nav-button mr-2" OnClick="LoadMoreProjects">
                            Load More <MudIcon Icon="@Icons.Material.Filled.ExpandMore" />
                        </MudButton>
                    }
                    @if (visibleProjects.Count > 6)
                    {
                        <MudButton Class="custom-nav-button" OnClick="UnloadProjects">
                            Show Less <MudIcon Icon="@Icons.Material.Filled.ExpandLess" />
                        </MudButton>
                    }
                </div>
            }
        </div>

        <div id="about" class="about-section">
            <MudText Typo="Typo.h2" Align="Align.Center" Class="mb-8">About Me</MudText>
            <MudText Align="Align.Center" Class="about-text">
                This is some filler content for the About Me section. You can replace this with your actual information.
            </MudText>
        </div>
    </div>
</div>

<style>
    .content-wrapper {
        min-height: 200vh;
    }

    .hero-section {
        height: 100vh;
        position: relative;
        overflow: hidden;
    }

    .background-image {
        position: absolute;
        right: 1%;
        top: 45%;
        transform: translateY(-50%);
        max-width: 50vw;
        max-height: 66vh;
        object-fit: contain;
        object-position: right center;
        z-index: 0;
        transition: transform 0.1s ease-out;
    }

    .sections-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
    }

    .skills-section, .projects-section, .about-section {
        padding: 4rem 0;
        color: white;
    }

    .nav-links {
        position: absolute;
        left: 12%;
        top: 50%;
        transform: translateY(-50%);
        z-index: 1;
    }

    .custom-nav-button {
        color: white;
        background-color: transparent;
        border: none;
        transition: all 0.3s ease;
        font-size: 2rem;
        font-weight: bold;
        text-transform: none;
        justify-content: flex-start;
        padding: 0;
        box-shadow: none;
    }

    .custom-nav-button:hover {
        color: #FFA07A;
        transform: translateX(20px);
        background-color: transparent;
    }

    .project-card {
        background-color: rgba(30, 30, 30, 0.8);
        color: white;
        transition: all 0.3s ease;
    }

    .project-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 20px rgba(255, 160, 122, 0.4);
    }

    .skill-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1rem;
        border-radius: 8px;
        transition: all 0.3s ease;
    }

    .skill-card:hover {
        transform: translateY(-5px);
    }

    .skill-logo {
        width: 80px;
        height: 80px;
        object-fit: contain;
    }

    .csharp { background-color: #68217A; }
    .js { background-color: #F0DB4F; color: #323330; }
    .dotnet { background-color: #512BD4; }
    .postgresql { background-color: #336791; }
    .linux { background-color: #FCC624; color: #000000; }
    .nix { background-color: #5277C3; }
</style>

@code {
    public class Project
    {
        public string Title { get; set; }
        public string Description { get; set; }
    }

    private List<Project> projects = new List<Project>
    {
        new Project { Title = "Project 1", Description = "Description of Project 1" },
        new Project { Title = "Project 2", Description = "Description of Project 2" },
        new Project { Title = "Project 3", Description = "Description of Project 3" },
        new Project { Title = "Project 4", Description = "Description of Project 4" },
        new Project { Title = "Project 5", Description = "Description of Project 5" },
        new Project { Title = "Project 6", Description = "Description of Project 6" },
        new Project { Title = "Project 7", Description = "Description of Project 7" },
        new Project { Title = "Project 8", Description = "Description of Project 8" },
        new Project { Title = "Project 9", Description = "Description of Project 9" },
    };

    private List<Project> visibleProjects;

    protected override void OnInitialized()
    {
        visibleProjects = projects.Take(6).ToList();
    }

    private void LoadMoreProjects()
    {
        int currentCount = visibleProjects.Count;
        visibleProjects = projects.Take(Math.Min(currentCount + 3, projects.Count)).ToList();
    }

    private void UnloadProjects()
    {
        visibleProjects = projects.Take(6).ToList();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("addMouseMoveListener", "#background-image");
            await JS.InvokeVoidAsync("scrollToTop");
        }
    }

    private async Task ScrollToSection(string sectionId)
    {
        await JS.InvokeVoidAsync("smoothScrollTo", sectionId);
    }
}